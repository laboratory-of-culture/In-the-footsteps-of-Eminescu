# In the footsteps of Eminescu
### handbook | development kit

[![Build Status](https://travis-ci.org/joemccann/dillinger.svg?branch=master)](https://travis-ci.org/joemccann/dillinger)\
At the moment beta version is deployed here https://eminescuplaces.com

- Mobile web AR 
- In the footsteps of Eminescu & AR-poetry experience
- ✨Magic ✨

In the footsteps of Eminescu project is supported by the European Union under the House of Europe programme.
![asset1](https://github.com/laboratory-of-culture/In-the-footsteps-of-Eminescu/blob/main/handbook-assets/asset1.png)



## Abstract

The main concept of the project "In the footsteps of Eminescu" is an augmented reality experience based on xR in web.

Choosing the places associated with the life and work of this poet in Chernivtsi and Bucharest, and following the link you will see through the camera the animated texts of his poems appearing in the sky and urban landscape; it will be accompanied by the voice of actors who are reading these poems.

## Concept

Literature and place seem to stand in a dual relationship, in which
they affect each other reciprocally. Places, of course, are part of
the material of literature – whether it is seemingly directly through
realistic depictions of real-world places, or more indirectly as
models for imagined places. On the other hand, literary texts are
part of the cultural processes whereby human landscapes (and
places) are constructed as dwellings for human beings, societies
and cultures. When an author writes a text about a place – be it
James Joyce writing about Dublin, Knut Hamsun about Oslo, or
Allen Ginsberg about San Francisco – the place changes as a
result of it. This is obviously true for certain famous and canonical
texts, which frequently leave their physical marks on places – in
the shape of statues of their authors, inscribed quotes, memorial
plaques, literary tours and so on. But in principle it is true for
every little text, no matter how insignificant, as long as it is read
and shared among a small community of readers.
If these arguments are accepted, then the study of the relationship
between literary texts and the places they deal with should be a
matter of interest not just to literary critics and authors, but to
society at large. Making visible and accessible the invisible layers
of meanings formed by the literary texts connected with places
and landscapes has a potential not just for preservation and
dissemination of cultural heritage, but also for enriching people's
experience of their local environment (whether it is the one they
live in, or one they are visiting). Furthermore, if the public could
be encouraged to enter into dialogue with the literary heritage –
that is, by writing and sharing their own texts in a place-centricsystem – this would entail a measure of cultural and democratic
empowerment of citizens with regard to their local environment.




Was developed the concept of walking route with and poetry text which belons to and a place

##### Chernivtsi (1858-1866)
- **Chernivtsi | street Arona Pumnula, 19 (Aron Pumnul's house)**
This is the first published poetry of 16-year-old Mihai Eminescu, published in brochure "Tears of Chernivtsi high school students on the grave of favorite teacher Aaron Pumnula" in 1866. These lines are dedicated to the teacher and mentor of Mihai Eminescu, Aaron Pumnul, with whom the poet has lived since 1865 in a house on Pumnul Street, 19 and tidied up his library. Pumnul took care of Eminescu, he was able to see his talent and in every way helped to develop it, and his ideas and worldview greatly influenced young Mihai, who, due to his teacher, realized his Romanian identity and soon changed his last name to Eminescu. After the death of Pumnul Eminescu left school at the gymnasium, and explained to his father: “I have nothing left to do in Chernivtsi. There is no fading - he died ... "


>**БІЛЯ МОГИЛИ ПУМНУЛА (1866), переклад Тамара Севернюк**\
Вдягнися у жалобу, прекрасна Буковино,\
Зеленим кипарисом чоло своє обвий,\
Бо нині у сузір*ї світил твоїх нетлінних\
Погасла найясніша, єдина із єдиних\
Пречиста зірка мрій.\
Скорботно дзвонять дзвони, метал тремтить від болю,\
І ритм його тремтіння б*є смутком раз у раз,\
Бо, ой! Величний геній твоїх пробуджень й долі\
Ступив на шлях безсмертя в небеснім ореолі\
Й лишив позаду нас.\
Ти кинув, кинув світ цей, о генію високий!\
Чекав на тебе в сині хор янголів легкий.\
Співав тобі він тайну небес блакитнооких,\
Вплітав гірлянди квітів у крону твоїх кроків\
І білі плів вінки.\
Оплакуючи втрату, ридає Буковина,\
І отчий край твій також затерп від голосінь.\
А око твого лету пронизує глибини\
Чуттів національних. І тихо-тихо плине\
Сльози сумної тінь.\
Нехай услід за шляхом твоїм, сумна й ласкава,\
Піде сльоза, що впала із молодих очей\
На цю смутну могилу... піде невеличава\
У співах, як зітхання, як туга і як слава\
Туди, в твій Елізей!\


- **Chernivtsi | street Shkil'na, 4 (former primary school where Eminescu studied)**
The house on Shkilna, 4 previously housed an Orthodox primary school for boys, in which Eminescu studied during 1958-60. The future poet went to school left at the age of 8 on the instructions of his father. The boy liked to quarrel, often spent his time in the present-day St. Mary's Square. Eminescu had the hardest time German, which he learned almost all his life. However, Eminescu studied diligently - was fifth in the school among 82 students.

>**Вірш “Буковині” (переклад Володимира Коломійця)**\
Не забуть довіку, мила Буковино,\
Горду твою вроду, гори та долини,\
Квіти з полонин...\
Ще й потоків чистих шум дзвінкий у скелях,\
Ще й річок перлистих на полях веселих\
Світанковий плин!\
Плач моєї долі, сміх моєї долі —\
Ув одежі співу мрії молодої...\
Дивна таїна!\
Все єство проймає, спонука до дії\
І солодким словом щастя та надії\
Серце розтина!\
Земле, горем бита, тут, під чистим небом,\
Сенс життя пізнав я і себе — крізь тебе.\
Ще й признаюсь я:\
Волею твоєю став співцем у світі,\
Долю-наречену взяв, що вічно світить, —\
То зоря твоя.\
Як у піднебессі тремко місяць ходить\
І хмарки сплелися в ніжні хороводи —\
Присинають день.\
Слухаю я легіт!.. Він на дивній арфі\
Грає і співає все співанки гарні\
З Буковини ген...\
Листям легіт має... Чи флояра грає?\
І у тому співі б'ється, не вгаває\
Серце мовчазне!..\
Видивами стеле шлях собі за обрій\
Через гори й доли — в край хоробрий, добрий,\
Що гука мене.\
Голос мій таємний — все туди, до тебе...\
А на віях сльози... чи проміння тепле?..\
Ні, я не мовчу!\
Завжди так, мій краю, як тебе згадаю, —В серці сум і сонце... Марю і зітхаю,\
Буковино, чуй!\

- **Chernivtsi | street Main, 14 (former hotel "Moldova")**
Mihai Eminescu was fond of theater. "Eminescu closely followed that took place on stage, - wrote Stefanelli. - He stared at the actors, as if he wanted to absorb all the action, all the melodies that sounded in their mouths ... ”. The theater has changed dramatically his life. In the spring of 1864 a theatrical troupe arrived in Chernivtsi on tour Mihai Pascali and Fanny Tardini. They performed at the Moldavia Hotel near the church Saint Paraskeva. Mihai did not miss any of their performances. He was imbued with passion to the theater, recited poems, sang songs from their repertoire. Finally, when the theater troupe finished touring in the city, he left with them.

>**Вірш “Мов днина оця” (переклад Миколи Ігнатенка)**\
Зелена озерна глибінь\
Відбила ясну голубінь\
Із гроном хмарин срібляних,\
Із сонцем, що сяє крізь них,\
Діброву дрімучу взяли\
В обійми прозорі вали,\
До неба чоло підвела\
Розбита вітрами скала\.
На кручу іду залюбки -\
Вона окриляє думки.\
Відтіль, скільки оком сягну,\
Дивлюся на схід, в длину,\
На захід, в захмарену даль -\
І серце поймає печаль.\
Вертаюсь на луг напрямки,\
Лягаю вдухмяні квітки,\
Вчуваю, як плеще прибій\
І стогне ледь-ледь вітровій.\
Природа навколо бринить,\
Вгорі - оксамитна блакить,\
Внизу - килими із квіток,\
Гаптовані сяйвом цяток,\
А легіт на лоні води\
Лишає легенькі сліди.\
На крилах нечутних вітрець\
Несе аромат навпростець.\
А лебідь об хвилю плеснув,\
А човен вітрила напнув,\
А синіх метеликів рій\
Спиває медовий напій.\
Якби-то я крилечка мав, -\
Метеликом ніжним би став,\
Метеликом став би легким,\
Веселим, дитинно метким;\
На луг прилітав би сюди\
Спивати солодкі меди…\
На квітку я важу одну:\
Мов днина оця, чарівну!(1866 р.)\

##### Bucharest (1877 - 1889)
- **Bucharest| Strada Piața Amzei 6**
In 1883, Eminescu lived with his friend and colleague from the newspaper "Timpul" Ioan Slavici. This house was located among the boyar houses of Gălășescu, across the road from the entrance to the theater "Ion Creangă". From the window of the house overlooking the square, Eminescu could watch the life of the street and the vendors selling vegetables here. While living here, Eminescu wrote such poems as "Povestea Codrului", "Singurătate", "Pe aceeași ulicioară", "Mai am un singur dor" and all "Letters". Now on the site of that house is a house.

>**Glossă**\
Vreme trece, vreme vine,\
Toate-s vechi ș i nouă toate;\
Ce e rău ș i ce e bine\
Tu te-ntreabă ș i socoate;\
Nu spera ș i nu ai teamă,\
Ce e val ca valul trece;\
De te-ndeamnă, de te cheamă,\
Tu rămâi la toate rece.\
Multe trec pe dinainte,\
În auz ne sună multe,\
Cine ţine toate minte\
Ș i ar sta să le asculte?...\
Tu a ș ează-te deoparte,\
Regăsindu-te pe tine,\
Când cu zgomote de ș arte\
Vreme trece, vreme vine.\
Nici încline a ei limbă\
Recea cumpăn-a gândirii\
Înspre clipa ce se schimbă\
Pentru masca fericirii,\
Ce din moartea ei se na ș te\
Ș i o clipă ţine poate;\
Pentru cine o cunoa ș te\
Toate-s vechi ș i nouă toate.\
Privitor ca la teatru\
Tu în lume să te-nchipui\
Joace unul ș i pe patru\
Totu ș i tu ghici-vei chipu-i,\
Ș i de plânge, de se ceartă,\
Tu în colţ petreci în tine\
Ș i-nţelegi din a lor artăCe rău ș i ce e bine.\
Viitorul ș i trecutul\
Sunt a filei două feţe,\
Vede-n capăt începutul\
Cine ș tie să le-nveţe;\
Tot ce-a fost ori o să fie\
În prezent le-avem pe toate,\
Dar de-a lor zădărnicie\
Te întreabă ș i socoate.\
Căci acelora ș i mijloace\
Se supun câte există,\
Ș i de mii de ani încoace\
Lumea-i veselă ș i tristă;\
Alte mă ș ti, aceea ș i piesă,\
Alte guri, aceea ș i gamă,\
Amăgit atât de-adese\
Nu spera ș i nu ai teamă.\
Nu spera când vezi mi ș eii\
La izbândă făcând punte,\
Te-or întrece nătărăii,\
De ai fi cu stea în frunte;\
Teamă n-ai, căta-vor iară ș i\
Între dân ș ii să se plece,\
Nu te prinde lor tovară ș\
Ce e val, ca valul trece.\
Ca un cântec de sirenă,\
Lumea-ntinde lucii mreje;\
Ca să schimbe-actorii-n scenă,\
Te mome ș te în vârteje;\
Tu pe-alături te strecoară,\
Nu băga nici chiar de seamă,\
Din cărarea ta afară\
De te-ndeamnă, de te cheamă.\
De te-ating, să feri în laturi,\
De hulesc, să taci din gură;\
Ce mai vrei cu-a tale sfaturi,\
Dacă ș tii a lor măsură;\
Zică toţi ce vor să zică,\
Treacă-n lume cine-o trece;Ca să nu-ndrăge ș ti nimică,\
Tu rămâi la toate rece.\
Tu rămâi la toate rece,\
De te-ndeamnă, de te cheamă;\
Ce e val, ca valul trece,\
Nu spera ș i nu ai teamă;\
Te întreabă ș i socoate\
Ce e rău ș i ce e bine;\
Toate-s vechi ș i nouă toate:\
Vreme trece, vreme vine.\
(1883)
- **Bucharest| strada Plantelor nr.9 (​ sanatoriul doctorului Sutu)**
This building used to house the Caritas Sanatoriul doctorului Sutu, where Mihai Eminescu was treated for syphilis. In fact, at the age of 33 the poet due to fatigue discovered bipolar disorder with manic-depressive symptoms. However, the doctors of that time Eminescu was treated for syphilis with the only drug known at the time - mercury. It worsened the poet's condition even more, because mercury causes irreversible damage to the nervous system cardiovascular systems. And on June 15, 1889, at about 4 am Eminescu died. The newspaper "Românul" then wrote "Eminescu is no more". This verse is poetic testament to Eminescu. Although the poet was buried in Bella Cemetery in Bucharest, in Constanti built a statue of the poet. This is how the poet's wishes were fulfilled - after death to be by the sea.

>**Mai am un singur dorMai am un singur dor**\
În liniștea serii\
Să mă lăsaţi să mor\
La marginea mării;\
Să-mi fie somnul lin\
Și codrul aproape,\
Pe-ntinsele ape\
Să am un cer senin.\
Nu-mi trebuie flamuri,\
Nu voi sicriu bogat,\
Ci-mi împletiţi un pat\
Din tinere ramuri.\
Și nime-n urma mea\
Nu-mi plângă la creștet,\
Doar toamna glas să dea\
Frunzișului veșted.\
Pe când cu zgomot cad\
Isvoarele-ntr-una,\
Alunece luna\
Prin vârfuri lungi de brad.\
Pătrunză talanga\
Al serii rece vânt,\
Deasupră-mi teiul sfânt,\
Să-și scuture creanga.\
Cum n-oi mai fi pribeag\
De-atunci înainte,\
M-or troieni cu drag\
Aduceri aminte.\
Luceferi, ce răsar\
Din umbră de cetini,\
Fiindu-mi prietini,\
O să-mi zâmbească iar.\
Va geme de patemi\
Al mării aspru cânt...\
Ci eu voi fi pământ\
În singurătate-mi.\

- **Bucharest | Bulevardul General Gheorghe Magheru 9 (memorial plaque)**
Eminescu lived in the house of Tito Mayorescu, which was previously located on the site of the park Arthur Verona Street. This residence also served as a meeting place for Junimia, Literary Society and the Masonic Lodge of German rule. They say that in Eminescu had a platonic love affair with Mita Kremnitz, the daughter-in-law of the landlord. He gave her a notebook with his poems, among which were such masterpieces as “Rugăciunea unui dac” and “Atât de fragedă”. Also in this building on April 24, 1882 the poet for the first time he read excerpts from the first versions of the poems "Scrisori" and "Luceafărul".


>**Atât de fragedă, te-asemeni**\
Cu floarea albă de cireş,\
Şi ca un înger dintre oameni\
În calea vieţii mele ieşi.\
Abia atingi covorul moale,\
Mătasea sună sub picior,\
Şi de la creştet până-n poale\
Pluteşti ca visul de uşor.\
Din încreţirea lungii rochii\
Răsari ca marmura în loc –\
S-atârnă sufletu-mi de ochii\
Cei plini de lacrimi şi noroc.\
O, vis ferice de iubire,\
Mireasă blândă din poveşti,\
Nu mai zâmbi! A ta zâmbire\
Mi-arată cât de dulce eşti,\
Cât poţi cu-a farmecului noapte\
Să-ntuneci ochii mei pe veci,\
Cu-a gurii tale calde şoapte,\
Cu-mbrăţişări de braţe reci.\
Deodată trece-o cugetare,\
Un văl pe ochii tăi fierbinţi:\
E-ntunecoasa renunţare,\
E umbra dulcilor dorinţi.\
Te duci, ş-am înţeles prea bine\
Să nu mă ţin de pasul tău,\
Pierdută vecinic pentru mine,\
Mireasa sufletului meu!\
Că te-am zărit e a mea vină\
Şi vecinic n-o să mi-o mai iert,\
Păşi-va visul de lumină\
Tinzându-mi dreapta în deşert.\
Şi să-mi răsari ca o icoanăA pururi verginei Marii,\
Pe fruntea ta purtând coroană –\
Unde te duci? Când o să vii?\

# Tech

What Web AR means (Augmented Reality on the Web)

![asset2](https://github.com/laboratory-of-culture/In-the-footsteps-of-Eminescu/blob/main/handbook-assets/asset2.png)

Augmented Reality is the technology that makes possible to add overlayed content on the real world. It can be provided for several type of devices: handleheld (like mobile phones), headsets, desktop displays, and so on. For handleheld devices (more in general, for video-see-through devices) the 'reality' is captured from one or more cameras and then shown on the device display, adding some kind of content on top of it.

![asset3](https://github.com/laboratory-of-culture/In-the-footsteps-of-Eminescu/blob/main/handbook-assets/asset5.jpg)

 aframe-ar
Augmented reality for a-frame.

## Marker Based

### \<a-marker\>

Here are the attributes for this entity

| Attribute | Description | Component Mapping |
| --- | --- | --- |
| type | type of marker - ['pattern', 'barcode', 'unknown' ] | artoolkitmarker.type |
| size | size of the marker in meter | artoolkitmarker.size |
| url | url of the pattern - IIF type='pattern' | artoolkitmarker.patternUrl |
| value | value of the barcode - IIF type='barcode' | artoolkitmarker.barcodeValue |
| preset | parameters preset - ['hiro', 'kanji'] | artoolkitmarker.preset |
| emitevents | emits 'markerFound' and 'markerLost' events - ['true', 'false'] | - |
| smooth | turn on/off camera smoothing - ['true', 'false'] - default: false | - |
| smoothCount | number of matrices to smooth tracking over, more = smoother but slower follow - default: 5 | - |
| smoothTolerance | distance tolerance for smoothing, if smoothThreshold # of matrices are under tolerance, tracking will stay still - default: 0.01 | - |
| smoothThreshold | threshold for smoothing, will keep still unless enough matrices are over tolerance - default: 2 | - |


### \<a-marker-camera\>
Usually the model used in augmented reality is about changing the modelViewMatrix
based on the marker position. the camera being static in 0,0,0 looking toward negative z.

We define as well a model where we move the camera, instead of the object.
It changes the camera transform matrix.

This cameraTransform mode seems more instinctive than the modelView mode.
cameraTransform would fit well a room-scale setup, with *multiple markers connected to each other*.
modelView is able to provide multiple *independent* markers.

```html
        <!-- add artoolkit into your scene -->
        <a-scene artoolkit>
        <!-- define your scene as usual -->
        <a-box></a-box>
        <!-- define a camera inside the <a-marker-camera> -->
        <a-marker-camera preset='hiro'><a-marker-camera>
        </a-scene>
```

## Location Based


### `gps-camera`

**Required**: yes
**Max allowed per scene**: 1

This component enables the Location AR. It has to be added to the `camera` entity.
It makes possible to handle both position and rotation of the camera and it's used to determine where the user is pointing their device.

For example:

```HTML
<a-camera gps-camera rotation-reader></a-camera>
```

In addition to that, as you can see on the example above, we also have to add `rotation-reader` to handle rotation events. See [here](https://aframe.io/docs/0.9.0/components/camera.html#reading-position-or-rotation-of-the-camera) for more details.


### Properties

| Property   | Description | Default Value |
|------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| alert     | Whether to show a message when GPS signal is under the `positionMinAccuracy`                  | false |                                                                                                                                                                        | true          |
| positionMinAccuracy        | Minimum accuracy allowed for position signal    | 100 |
| minDistance        | If set, places with a distance from the user lower than this value, are not showed. Only a positive value is allowed. Value is in meters.    | 0 (disabled) |

### `gps-entity-place`

**Required**: yes
**Max allowed per scene**: no limit

This component makes every entity GPS-trackable. It assignes a specific world position to the entity, so the user can see it when their phone is pointing to its position in the real world. If user is far from the entity, their will see it smaller. If it is too far, their will not see it at all.

It requires latitude and longitude as a single string parameter (example with `a-box` aframe primitive):

```HTML
<a-box color="yellow" gps-entity-place="latitude: <your-latitude>; longitude: <your-longitude>"/>
```

### `gps-camera-debug`

**Required**: no
**Max allowed per scene**: 1

This component has to be added only in development environments, not production ones.
It shows a debug UI with camera informations and a list of registered `gps-entity-place` entities, showing also distance from the user for each one.

It has to be added to the `a-scene`:

```HTML
<a-scene gps-camera-debug embedded arjs='sourceType: webcam; debugUIEnabled: false;'></a-scene>
```

![asset3](https://github.com/laboratory-of-culture/In-the-footsteps-of-Eminescu/blob/main/handbook-assets/asset6.jpg)

# Location Based

Location Based has been implemented only for A-Frame framework.

[This article ](https://medium.com/chialab-open-source/build-your-location-based-augmented-reality-web-app-c2442e716564) gives you a first glance to Location Based on AR.js.
It can be used for indoor (but with low precision) and outdoor geopositioning of AR content.

You can load places statically, from HTML or from Javascript, or you can load your data from local/remote json, or even through API calls. Choice is yours. On the article above there are all the options explained, as tutorials.

Following there's the API Reference.

### `gps-camera`

**Required**: yes

**Max allowed per scene**: 1

This component enables the Location AR. It has to be added to the `camera` entity.
It makes possible to handle both position and rotation of the camera and it's used to determine where the user is pointing their device.

For example:

```HTML
<a-camera gps-camera rotation-reader></a-camera>
```

In addition to that, as you can see on the example above, we also have to add `rotation-reader` to handle rotation events. See [here](https://aframe.io/docs/0.9.0/components/camera.html#reading-position-or-rotation-of-the-camera) for more details.


### Properties

| Property   | Description | Default Value |
|------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| alert     | Whether to show a message when GPS signal is under the `positionMinAccuracy`                  | false |                                                                                                                                                                        | true          |
| positionMinAccuracy        | Minimum accuracy allowed for position signal    | 100 |
| minDistance        | If set, places with a distance from the user lower than this value, are not showed. Only a positive value is allowed. Value is in meters.    | 0 (disabled) |
| maxDistance        | If set, places with a distance from the user higher than this value, are not showed. Only a positive value is allowed. Value is in meters.    | 0 (disabled) |
| simulateLatitude   | Setting this allows you to simulate the latitude of the camera, to aid in testing.    | 0 (disabled) |
| simulateLongitude   | Setting this allows you to simulate the longitude of the camera, to aid in testing.    | 0 (disabled) |
| simulateAltitude   | Setting this allows you to simulate the altitude of the camera in meters above sea level, to aid in testing.    | 0 (disabled) |
| gpsMinDistance   | Setting this allows you to control how far the camera must move, in meters, to generate a GPS update event. Useful to prevent 'jumping' of augmented content due to frequent small changes in position.    | 5 |
| gpsTimeInterval   | Setting this allows you to control how frequently to obtain a new GPS position. If a previous GPS location is cached, the cached position will be used rather than a new position if its 'age' is less than this value, in milliseconds. This parameter is passed directly to the Geolocation API's `watchPosition()` method.    | 0 (always use new position, not cached) |


### `gps-entity-place`

**Required**: yes

**Max allowed per scene**: no limit

This component makes each entity GPS-trackable. This assigns a specific world position to an entity, so that the user can see it when their device is pointing to its position in the real world. If the user is far from the entity, it will seem smaller. If it's too far away, it won't be seen at all.

It requires latitude and longitude as a single string parameter (example with `a-box` aframe primitive):

```HTML
<a-box material="color: yellow" gps-entity-place="latitude: <your-latitude>; longitude: <your-longitude>"/>
```

⚡️ In addition, you can use the a-frame "position" parameter to assign a y-value to change the height of the content.
This value should be entered as meters above or below (if negative) the current camera height. For example, this would assign a height of 30 meters, and will be displayed relative to the gps-camera's current height:

```HTML
<a-box material="color: yellow" gps-entity-place="latitude: <your-latitude>; longitude: <your-longitude>" position="0 30 0"/>
```

### Properties

No real property apart from the string that defined latitude and longitude together, as shown above.

### Custom Attributes

The following are Custom Attributes that can be retrieved from `gps-entity-place` entities, for example:

```js
const distanceMsg = document.querySelector('[gps-entity-place]').getAttribute('distanceMsg');
console.log(distanceMsg);   // "890 meters"
```

| Custom Attribute   | Description | Default Value |
|------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|
| distance        | Distance from user, updated at every user position update. Value in meters.   | 0 |
| distanceMsg        | Distance from user as string, with unit, updated at every user position update. Value as `<distance> meters/kilometers`.   | '' |

----

### Events

Take a look at the [UI and Events](./ui-events.md) page for Location Based Custom Events.

----

⚡️ Usually, in Location Based, it's nice to have the augmented content that will always face the user, so when you rotate the camera, 3D models or most of all, text, are well visible.

Look at [this example](https://github.com/AR-js-org/AR.js/tree/master/aframe/examples/location-based/always-face-user) in order to create `gps-entity-place` entities that will always face the user (camera).

----

## Viewing every distant object

If your location-based AR content is distant from the user (around 1km or
more), it is recommended to use the new `arjs-webcam-texture` component (introduced in AR.js 3.2.0), which uses a THREE.js texture to stream the camera feed and allows distant content to be viewed. This component is automatically injected if the `videoTexture` parameter of the `arjs` system is set to `true` *and* the `sourceType` is `webcam`. For example (code snippet only):

```html
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; videoTexture: true; debugUIEnabled: false;"
    >
```

## Reducing shaking effects

In location-based mode, 'shaking' effects can occur due to frequent small
changes in the device's orientation, due to the high sensitivity of the device
sensors such as the accelerometer. If using AR.js 3.3.1 or greater this can optionally be reduced using an exponential smoothing technique. *Note that there are currently some occasional display artefacts with this if moving the device quickly or suddenly so please test before you enable it in a finished application; work to resolve these is on-going.*

This is enabled by adding the `arjs-look-controls` component to your `a-camera` with a `smoothingFactor` property. You must also disable A-Frame's default `look-controls`, as `arjs-look-controls` will replace it. For example:

```html
<a-camera id='camera1' look-controls-enabled='false' arjs-look-controls='smoothingFactor: 0.1' gps-camera='gpsMinDistance: 5' rotation-reader> </a-camera>
```

Exponential smoothing works by applying a smoothing factor to each newly-read device rotation angle (obtained from sensor readings) such that the previous smoothed value counts more than the current value, thus reducing 'noise' and 'jitter'. If `k` is the smoothing factor:

```
smoothedAngle = k * newValue + (1 - k) * previousSmoothedAngle
```

It can be seen from this that the **smaller** the value of `k` (the `smoothingFactor` property), the **greater** the smoothing effect. In tests, 0.1 appears to give the best result.

Also you can reduce 'jumping' of augmented content when near a place - a
bad-looking effect due to GPS sensors' low precision. To do so you can use the `gpsMinDistance` and `gpsTimeInterval` properties. See the <a href="./location-based.md">Location Based specific docs</a> to learn how to use them.

----

## Projected Camera Version

The experimental 'projected camera' version of the location-based components for AR.js uses [Spherical Mercator](https://www.maptiler.com/google-maps-coordinates-tile-bounds-projection) (aka EPSG:3857) to store both the camera position and the position of added points of interest and other geographical data.

The rationale for this version is to allow easy addition of more complex geographic data such as roads and paths. Such data can be projected and added to an AR.js scene, and then, because Spherical Mercator units approximate to metres (away from the poles), the coordinates can be used directly as WebGL/A-Frame world coordinates.

The two components for the projected camera version are `gps-projected-camera` and `gps-projected-entity-place`. Their interface is almost identical to `gps-camera` and `gps-entity-place` but they work differently internally.

For example:

```HTML
<a-camera gps-projected-camera rotation-reader></a-camera>
```
and:

```HTML
<a-box color="yellow" gps-projected-entity-place="latitude: <your-latitude>; longitude: <your-longitude>"/>
```
Note that internally, the latitude and longitude are converted to Spherical Mercator coordinates.

As for `gps-entity-place`, you can specify an altitude using the *y* component of the `position` attribute:

```HTML
<a-box color="yellow" gps-projected-entity-place="latitude: <your-latitude>; longitude: <your-longitude>" position="0 30 0"/>
```

### Calculating world coordinates of arbitrary augmented content

`gps-projected-camera` has some useful properties and methods which can be used to easily work with arbitrary augmented content (for example, polylines or polygons sourced from geodata APIs such as [OpenStreetMap](https://openstreetmap.org)). Before introducing these, it needs to be made clear that, in `gps-projected-camera`, the **original GPS position** is set as the world origin. So, if arbitrary content is to be added to the scene, and the source coordinates for this content is in unprojected (WGS84) latitude and longitude, it needs to be:

- projected to Spherical Mercator;
- and then converted to world coordinates relative to the original GPS position.

On the other hand, only the second step is needed if the source coordinates are already projected. We'll look at each scenario now.

#### Source data in WGS84 latitude/longitude

This is probably the most common scenario.
The `latLonToWorld(lat, lon)` method of the `gps-projected-camera` component converts latitude and longitude directly to world coordinates, performing the projection as the first step and then calculating the world coordinates from the projected coordinates. It will return a 2-member array containing the *x* and *z* world coordinates, allowing the developer to calculate or specify the *y* coordinate (altitude) independently.

#### Source data in Spherical Mercator

An alternative scenario is when the augmented content has already been projected into Spherical Mercator and therefore does not need the initial projection step when added to an AR.js scene. This may occur when an API serves data in Spherical Mercator, for instance. In this case, we still need to convert the Spherical Mercator coordinates to world coordinates relative to the original GPS position. `gps-projected-camera` has an `originCoordsProjected` property, which represents the original GPS position in Spherical Mercator coordinates. This is a two-member array, containing the Spherical Mercator easting and northing, respectively, of the origin point. From this, we can therefore work out the world coordinates from Spherical Mercator coordinates:

* `xWorld = featureEasting - originCoordsProjected[0]`

and

* `zWorld = -(featureNorthing - originCoordsProjected[1])`

where `xWorld` and `zWorld` are the world *x* and *z* coordinates of the augmented content, and `featureEasting` and `featureNorthing` are the content's Spherical Mercator coordinates. Note how we have to reverse the sign of *z* as increasing Spherical Mercator easting corresponds to increasing *x* in OpenGL coordinates, and increasing altitude corresponds to increasing *y*, but increasing Spherical Mercator northing corresponds to **decreasing** *z*.



![asset3](https://github.com/laboratory-of-culture/In-the-footsteps-of-Eminescu/blob/main/handbook-assets/asset7.gif)

__Location Based AR__, this kind of AR uses real-world places in order to show Augmented Reality content, on the user device. The experiences that can be built with this library are those that uses users position in the real world. The user can move (ideally outdoor) and through their smartphones they can see AR content where places are in the real world. Moving around and rotating the phone will make the AR content change according to users position and rotation (so places are 'sticked' in their real position, and appear bigger/thinner according to their distance from the user). With this solution it’s possible to build experiences like interactive support for touristic guides, support when exploring a new city, find places of interest like buildings, museums, restaurants, hotels and so on. It’s also possible to build learning experiences like treasure hunts and biology or history learning games, or use this technology for situated art (visual art experiences bound to specific real world coordinates).

Example

```html
<a-scene id="scene">
<a-camera position="0 1.2 0" look-controls-enabled='false' arjs-look-controls='smoothingFactor: 0.2'
gps-camera='gpsMinDistance: 100' rotation-reader></a-camera>
<a-entity id="dino" position="-1 0 -3" scale="0.5 0.5 0.5">
<a-entity id="text" position="0 6 0" rotation="0 55 0" scale="5 5 5" gltf-model="./models/CheDnyna/01.gltf"
gps-projected-entity-place="latitude: 48.2938245 ; longitude:25.9374127 ;" 
sound="src: ./audio-assets/Dni.mp3; autoplay: true"animation-mixer
shadow="cast: true; receive: false"></a-entity>
</a-entity>
</a-scene>
```

Animated text was developed using gltf 2.0

glTF (derivative short form of Graphics Language Transmission Format or GL Transmission Format) is a standard file format for three-dimensional scenes and models. A glTF file uses one of two possible file extensions, .gltf (JSON/ASCII) or .glb (binary). A .gltf file may be self-contained or may reference external binary and texture resources, while a .glb file is entirely self-contained. An open standard developed and maintained by the Khronos Group, it supports 3D model geometry, appearance, scene graph hierarchy, and animation. It is intended to be a streamlined, interoperable format for the delivery of 3D assets, while minimizing file size and runtime processing by apps.As such, its creators have described it as the "JPEG of 3D." The binary version of the format is called GLB, where all assets are stored in a single file.

![asset4](https://github.com/laboratory-of-culture/In-the-footsteps-of-Eminescu/blob/main/handbook-assets/asset8.gif)




**Requirements**

It works on every phone with webgl and webrtc. Marker based is very lightweight, while Image Tracking is more CPU consuming On device with multi-cameras, Chrome may have problems on detecting the right one. Please use Firefox if you find that AR.js opens on the wrong camera. There is an open issue for this. To work with Location Based feature, your phone needs to have GPS sensors Please, read carefully any suggestions that AR.js pops-up -as alerts- for Location Based on iOS, as iOS requires user actions to activate geoposition Location Based feature is only available on A-Frame Always deploy under https Accessing to the phone camera or to camera GPS sensors, due to major browsers restrictions, can be done only under https websites.

If you want to enhance and customize your Location Based experience, take a look at the [Location Based docs](https://ar-js-org.github.io/AR.js-Docs/location-based.md).


### Disclaimer
[![N|Solid](https://github.com/laboratory-of-culture/In-the-footsteps-of-Eminescu/blob/main/handbook-assets/logos.png)](https://houseofeurope.org.ua/)

In the footsteps of Eminescu project is supported by the European Union under the House of Europe programme.

This project was developed in cooperation with OpenHub Creative Cluster. Also we want list people who make this project possible: Oksana Chmil, Taras Chornyi, Khrystia Krushelnystka, Dmytro Mitsevych, Olena Lysenko, Vio Badea, Oana Ciobanu, Ihor Mosin, Ivanna Annyn, Dmytro Fakas, Vyacheslav Razumov, Mihai Eminescu Society of Romanian Culture, ROMANIAN CC EUDOXIU HURMUZACHI, Chernivtsi Museum of Local Lore


## General useful links

- [slides about aframe-ar](http://jeromeetienne.github.io/slides/artoolkit-aframe/)
- Augmented reality is about [understand the view matrix](http://www.3dgep.com/understanding-the-view-matrix/)
- [jsartoolkit5](https://github.com/artoolkit/jsartoolkit5)
- [artoolkit5](https://github.com/artoolkit/artoolkit5/)
- good collection of [marker patterns](https://github.com/artoolkit/artoolkit5/tree/master/doc/patterns)
- [RESEARCH-ARTICLE Poetic augmented reality: place-bound literature in locative media](https://dl.acm.org/doi/abs/10.1145/1621841.1621847)
